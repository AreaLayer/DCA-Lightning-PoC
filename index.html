<!DOCTYPE html>
<html>
<head>
  <title>Lightning Payment Gateway</title>
  <script src="https://cdn.jsdelivr.net/npm/@liquality/lightning-node@1.0.0/dist/lightning-node.min.js"></script>
</head>
<body>
  <h1>Lightning Payment Gateway</h1>
  
  <div id="paymentForm">
    <label for="amount">Amount:</label>
    <input type="number" id="amount" min="0" step="0.01">
    <button onclick="generateInvoice()">Generate Invoice</button>
  </div>

  <div id="invoiceContainer" style="display: none;">
    <h2>Invoice Details:</h2>
    <p id="invoiceAmount"></p>
    <p id="invoiceDescription"></p>
    <p id="invoicePaymentRequest"></p>
    <button onclick="payInvoice()">Pay Invoice</button>
  </div>

  <script>
    // Instantiate Lightning Node
    const node = new LightningNode({
      host: 'your-lightning-node-host',
      port: 9735,
      tls: false,
      macaroon: 'your-macaroon'
    });

    function generateInvoice() {
      const amount = document.getElementById('amount').value;

      // Generate Lightning invoice
      node.generateInvoice({ value: amount })
        .then(invoice => {
          document.getElementById('invoiceAmount').textContent = 'Amount: ' + invoice.value;
          document.getElementById('invoiceDescription').textContent = 'Description: ' + invoice.description;
          document.getElementById('invoicePaymentRequest').textContent = 'Payment Request: ' + invoice.paymentRequest;
          document.getElementById('invoiceContainer').style.display = 'block';
        })
        .catch(error => {
          console.error('Error generating invoice:', error);
        });
    }

    function payInvoice() {
      const paymentRequest = document.getElementById('invoicePaymentRequest').textContent.split(': ')[1];

      // Pay Lightning invoice
      node.payInvoice(paymentRequest)
        .then(response => {
          console.log('Payment successful:', response);
          alert('Payment successful!');
        })
        .catch(error => {
          console.error('Error paying invoice:', error);
          alert('Payment failed. Please try again.');
        });
    }
  </script>
</body>
</html>
